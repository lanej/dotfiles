#!/bin/bash
# Battery status display for tmux status bar
# Shows battery level when charging or discharging

battery_info=$(pmset -g batt 2>/dev/null)

if [[ -z "$battery_info" ]]; then
  exit 0
fi

# Extract battery percentage
battery_percent=$(echo "$battery_info" | grep -o '[0-9]*%' | head -1 | tr -d '%')

# Check if battery is present
if ! echo "$battery_info" | grep -q "InternalBattery"; then
  exit 0
fi

# Only show when charging or discharging
if echo "$battery_info" | grep -q 'discharging'; then
  echo "#[fg=yellow,bg=brightblack] âš¡$battery_percent% "
elif echo "$battery_info" | grep -q 'charging'; then
  echo "#[fg=green,bg=brightblack] ðŸ”‹$battery_percent% "
fi
